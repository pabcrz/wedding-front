import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{t as b,b as y,n as C,c as v,T as F}from"./normalizeText.VKViLUwz.js";import{r as n}from"./index.JXKNaeUN.js";import"./index.DbQ44s1q.js";function k({open:l,onClose:r,guest:a,onConfirm:m}){const[i,t]=n.useState(!1),[d,h]=n.useState(""),[x,u]=n.useState(""),[N,f]=n.useState("");function j(){t(!0),h(s(a.fullName)),f("no")}function p(){t(!0),h(s(a.fullName)),f("si")}function g(o){if(o.preventDefault(),x===d)a.asistencia=N,b.promise(y(a),{loading:"Confirmando...",success:w=>(console.log(`${a.fullName} ${a.asistencia} asistira`),"Tu respuesta ha sido enviada..."),error:"Error al enviar tu respuesta"}),c(),m();else return alert(`Debes escribir: ${C(a.fullName)}`),!1}function s(o){return o.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function c(){r(),t(!1)}return e.jsx("div",{onClick:o=>{o.stopPropagation(),c()},className:`
        fixed inset-0 flex justify-center items-center transition-colors
        ${l?"visible bg-black/30":"invisible"}
      `,children:e.jsxs("div",{onClick:o=>{o.stopPropagation()},className:`
          bg-white rounded-xl p-6 transition-all w-96
          ${l?"scale-100 opacity-100":"scale-125 opacity-0"}
        `,children:[e.jsx("button",{onClick:c,className:"absolute top-2 right-2 p-1 rounded-lg text-gray-400 hover:bg-gray-200",children:e.jsx("img",{src:"/icons/close.svg",alt:"close icon",className:"size-5"})}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"mx-auto py-4 w-full",children:[e.jsxs("h3",{className:"text-xl font-semibold text-secondaryFont",children:["¡Hola, ",a.fullName,"!"]}),!i&&e.jsx("p",{className:"text-lg",children:"¿Nos acompañarás en nuestra boda?"})]}),e.jsxs("div",{className:"flex gap-4",children:[!i&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"w-full hover:bg-red-400 rounded hover:text-white",onClick:j,children:"No"}),e.jsx("button",{className:"w-full hover:bg-mainBG p-2 rounded hover:text-secondaryFont",onClick:p,children:"Si"})]}),i&&e.jsxs("div",{className:"flex-col",children:[e.jsxs("p",{className:"text-lg",children:["Para confirmar que",e.jsxs("strong",{children:[" ",N," asistirás"]}),' escribe lo siguiente: "',e.jsx("strong",{children:d}),'"']}),e.jsxs("form",{onSubmit:g,children:[e.jsx("input",{type:"text",className:"border-2 rounded-sm px-2 m-3 focus:outline-none border-mainBG",onChange:o=>u(o.target.value)}),e.jsx("button",{className:"border border-mainFont text-mainFont hover:bg-mainFont p-2 rounded hover:text-white",onClick:g,children:"Confirmar"})]})]})]})]})]})})}function S(){return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"flex flex-col text-center items-center pb-4 gap-2",children:[e.jsx("p",{className:"",children:"Te esperamos en:"}),e.jsx("h2",{className:"text-mainFont text-3xl",children:"Ex Hacienda La Resurrección"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-secondaryFont text-xl",children:"José María Morelos y Pavón 1, La Resurrección."}),e.jsx("h3",{className:"text-secondaryFont text-xl",children:"C.P. 56200, Texcoco, México."})]}),e.jsx("iframe",{className:"max-w-[90%] rounded-lg shadow-xl",src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3760.238259831083!2d-98.86129352396358!3d19.531381937517185!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x85d1e7dd67ee1801%3A0x18a2f24b0ba94be4!2sEx%20Hacienda%20La%20Resurrecci%C3%B3n!5e0!3m2!1ses-419!2smx!4v1720715072423!5m2!1ses-419!2smx",width:"500",height:"300",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"})]}),e.jsxs("section",{className:"bg-secondaryBG w-full p-4",children:[e.jsx("h2",{className:"text-mainFont text-center font-medium text-3xl",children:"Mesa de regalos"}),e.jsxs("div",{className:"flex md:justify-center flex-col md:flex-row items-center",children:[e.jsx("div",{className:"w-1/2 grid justify-center",children:e.jsx("a",{href:"https://www.amazon.com.mx/wedding/share/Carlosyarely",target:"_blank",className:"hover:opacity-60",children:e.jsx("img",{src:"/icons/amazon.svg",alt:"amazon logo",width:"100",height:"100"})})}),e.jsx("div",{className:"w-1/2 grid justify-center pb-4 md:pb-0",children:e.jsx("a",{href:"https://mesaderegalos.liverpool.com.mx/milistaderegalos/51484230",target:"_blank",className:"hover:opacity-60",children:e.jsx("img",{src:"/icons/liverpool-logo.svg",alt:"Liverpool logo",width:"150",height:"100"})})})]})]})]})}function z({open:l,onClose:r,guest:a}){function m(){r(),window.location.href="/"}function i(){r()}return e.jsx("div",{onClick:t=>{t.stopPropagation(),r()},className:`
        fixed inset-0 flex justify-center items-center transition-colors
        ${l?"visible bg-black/30":"invisible"}
      `,children:e.jsxs("div",{onClick:t=>t.stopPropagation(),className:`
          bg-white rounded-xl py-4 transition-all max-h-dvh overflow-y-scroll md:overflow-auto
          ${l?"scale-100 opacity-100":"scale-125 opacity-0"}
        `,children:[e.jsx("button",{onClick:r,className:"absolute top-2 right-2 p-1 rounded-lg text-gray-400 hover:bg-gray-200",children:e.jsx("img",{src:"/icons/close.svg",alt:"close icon",className:"size-5"})}),e.jsxs("div",{className:`text-center flex flex-col items-center w-auto
             ${a.asistencia==="no"?"max-w-[500px] px-4":""}
          `,children:[e.jsxs("div",{className:"mx-auto py-4 text-center flex items-center flex-col",children:[e.jsx("p",{className:"text-2xl font-semibold text-secondaryFont px-3",children:a.asistencia==="si"?`¡Nos vemos en la boda, ${a.fullName}!`:`Lamentamos que no puedas acompañarnos, ${a.fullName}.`}),a.asistencia==="si"&&e.jsxs(e.Fragment,{children:[e.jsx(S,{}),e.jsxs("p",{className:"text-lg pt-2",children:[e.jsx("strong",{children:"Boleto:"})," ",a.categoria.toLowerCase()]})]}),e.jsx("p",{className:"text-lg",children:"¿Deseas confirmar a otro invitado?"})]}),e.jsxs("div",{className:"flex gap-4 w-1/2",children:[e.jsx("button",{className:"w-full hover:bg-red-400 rounded hover:text-white",onClick:m,children:"No"}),e.jsx("button",{className:"w-full hover:bg-mainBG p-2 rounded hover:text-secondaryFont",onClick:i,children:"Si"})]})]})]})})}function P(){const[l,r]=n.useState([]),[a,m]=n.useState(""),[i,t]=n.useState(!1),[d,h]=n.useState({}),[x,u]=n.useState(!1);n.useEffect(()=>{x||(b.promise(v(),{loading:"Cargando invitados...",success:s=>"Invitados disponibles...",error:"Error"}),v().then(s=>{r(s.data.guests),console.log(s.data.guests)}).catch(s=>{console.log(s),b.error("Error al cargar los invitados.")}))},[x]);const f=l.filter(s=>s.asistencia==="sin confirmar").filter(s=>p(s.fullName).includes(p(a)));function j(s){m(s.target.value)}function p(s){return s.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function g(s){t(!0),h(s)}return e.jsxs(e.Fragment,{children:[e.jsx(F,{richColors:!0,position:"bottom-right"}),e.jsxs("div",{className:"max-w-[1200px] flex flex-col md:flex-row justify-center items-center gap-3",children:[e.jsx("label",{htmlFor:"searhc",className:"px-2 text-xl",children:"Buscar nombre:"}),e.jsx("input",{name:"search",type:"text",value:a,onChange:j,placeholder:"Ingresa tu nombre",className:"border-2 rounded border-mainBG focus:outline-none px-2"})]}),e.jsx("p",{className:"text-2xl p-4",children:"Selecciona tu nombre: "}),e.jsxs("div",{className:"flex flex-col md:flex-row md:flex-wrap gap-3 py-4 p-2 shadow-lg min-h-10 rounded-lg overflow-auto",children:[a&&a.length>=7&&f.map((s,c)=>e.jsxs("a",{href:"#",onClick:()=>g(s),className:"border hover:border-mainFont rounded-md px-3 hover:text-mainFont p-1 md:w-[49%]",children:[e.jsx("p",{className:"font-bold text-xl",children:s.fullName}),e.jsxs("p",{className:"text-lg",children:["Familia: ",s.familia]})]},c)),e.jsx(k,{open:i,onClose:()=>t(!1),guest:d,onConfirm:()=>{u(!0)}}),e.jsx(z,{open:x,onClose:()=>u(!1),guest:d})]})]})}export{P as default};
